{% extends "base.html" %}
{% block content %}
<div class="card shadow-sm mx-auto" style="max-width: 600px;">
  <div class="card-body">
    <h4 class="card-title mb-3">
      {{ "New Project" if mode == "create" else "Edit Project" }}
    </h4>

    <form method="post">
      {% if mode == "create" %}
      <div class="mb-3">
        <label class="form-label">Project ID</label>
        <input name="project_id" type="number" class="form-control" required>
      </div>
      {% endif %}

      <div class="mb-3">
        <label class="form-label">Name</label>
        <input name="name" type="text" class="form-control"
               value="{{ row[1] if row else '' }}" required>
      </div>

      <div class="row">
        <div class="col mb-3">
          <label class="form-label">Start Date</label>
          <input name="start_date" type="date" class="form-control"
                 value="{{ row[2] if row else '' }}">
        </div>
        <div class="col mb-3">
          <label class="form-label">End Date</label>
          <input name="end_date" type="date" class="form-control"
                 value="{{ row[3] if row else '' }}">
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Department</label>
        <select name="dept_id" class="form-select">
          <option value="">-- none --</option>
          {% for d in depts %}
            {% set selected = 'selected' if row and row[4] == d[0] else '' %}
            <option value="{{ d[0] }}" {{ selected }}>{{ d[0] }} â€” {{ d[1] }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Summary</label>
        <textarea name="summary" rows="3" class="form-control">{{ row[5] if row else '' }}</textarea>
      </div>

      <button type="submit" class="btn btn-primary">
        {{ "Create" if mode == "create" else "Update" }}
      </button>

      <a href="{{ url_for('projects_list') }}" class="btn btn-secondary">Cancel</a>
    </form>
  </div>
</div>
{% endblock %}
