{% extends "base.html" %}
{% block content %}

<!-- The 'title' variable comes from the route -->
<h2 style="color: var(--primary-purple);">{{ title }}</h2>

<!-- 
  Form posts to the add_cost route.
  The 'cost' variable is either None (for adding) or has data (if we're re-rendering on error)
-->
<form method="POST" action="{{ url_for('costs.add_cost') }}">
    <div class="card p-4 shadow-sm">
        
        <!-- Project ID -->
        <div class="mb-3">
            <label class="form-label fw-semibold">Project ID</label>
            <input class="form-control" name="project_id" required 
                   value="{{ cost.project_id if cost }}">
            <div class="form-text">
                Enter the ID of the project to associate this cost with (e.g., 201).
            </div>
        </div>
    
        <!-- Projected Cost -->
        <div class="mb-3">
            <label class="form-label fw-semibold">Projected Cost ($)</label>
            <input type="number" step="0.01" class="form-control" name="projected_cost"
                   value="{{ cost.projected_cost if cost }}">
        </div>
        
        <!-- Actual Cost -->
        <div class="mb-3">
            <label class="form-label fw-semibold">Actual Cost ($)</label>
            <input type="number" step="0.01" class="form-control" name="actual_cost"
                   value="{{ cost.actual_cost if cost }}">
        </div>

        <div class="form-text mb-3">
            Note: Efficiency will be automatically calculated by a trigger when you save.
        </div>

        <hr>
        <div class="d-flex justify-content-end">
            <a href="{{ url_for('costs.list_costs') }}" class="btn btn-secondary me-2">Cancel</a>
            <button type="submit" class="btn btn-primary">Save Cost Record</button>
        </div>
    </div>
</form>

{% endblock %}