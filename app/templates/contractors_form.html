{% extends "base.html" %}
{% block content %}

<!-- The 'title' variable comes from the route -->
<h2 style="color: var(--primary-purple);">{{ title }}</h2>

<!-- Form posts to the same URL (either /add or /edit/<id>) -->
<form method="POST">
    <div class="card p-4">
        
        <!-- 
          ===============================================
          ==  CONTRACTOR ID FIELD IS NOW INCLUDED      ==
          ===============================================
        -->
        <div class="mb-2">
            <label class="form-label fw-semibold">Contractor ID</label>
            <input class="form-control" name="contractor_id" 
                   value="{{ contractor.contractor_id if contractor }}" 
                   {{ "readonly" if contractor }}  
                   required>
            {% if not contractor %}
            <div class="form-text">You must enter a new, unique ID.</div>
            {% endif %}
        </div>

        <div class="mb-2">
            <label class="form-label fw-semibold">Contractor Name</label>
            <!-- Pre-fill 'name' if editing -->
            <input class="form-control" name="contractor_name" 
                   value="{{ contractor.name if contractor }}" 
                   required>
        </div>
    
        <div class="mb-2">
            <label class="form-label fw-semibold">Bid Amount</label>
            <!-- Pre-fill 'bid_amount' if editing -->
            <input type="number" step="0.01" class="form-control" name="bid_amount"
                   value="{{ contractor.bid_amount if contractor }}">
        </div>
        
        <div class="mb-2">
            <label class="form-label fw-semibold">Project ID</label>
            <!-- Pre-fill 'project_id' if editing -->
            <input type="number" class="form-control" name="project_id"
                   value="{{ contractor.project_id if contractor }}">
        </div>

        <button class="btn btn-primary mt-2">Save Contractor</button>
    </div>
</form>

{% endblock %}